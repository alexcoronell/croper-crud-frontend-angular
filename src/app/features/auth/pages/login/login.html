<div class="w-full max-w-md animate-in fade-in slide-in-from-bottom-4 duration-500">
  <div class="bg-white p-8 rounded-radius-croper shadow-croper border border-croper-green/5">
    <div class="text-center mb-8">
      <h2 class="text-3xl font-bold text-croper-dark">¡Hola de nuevo!</h2>
      <p class="text-croper-gray mt-2">Ingresa a tu panel de gestión agropecuaria.</p>
    </div>

    <form (submit)="onSubmit($event)" class="space-y-5">
      <div>
        <label class="block text-sm font-bold text-croper-text mb-2">Usuario</label>
        <input
          type="text"
          [formField]="loginForm.username"
          placeholder="Usuario"
          class="w-full px-4 py-3 rounded-lg border border-gray-200 focus:border-croper-green focus:ring-2 focus:ring-croper-green/20 outline-none transition-all placeholder:text-gray-300"
        />
        @if (loginForm.username().touched() && loginForm.username().errors()[0]?.message) {
          <span class="text-xs text-red-500 mt-1 block">{{
            loginForm.username().errors()[0].message
          }}</span>
        }
      </div>

      <div>
        <div class="flex justify-between mb-2">
          <label class="text-sm font-bold text-croper-text">Contraseña</label>
        </div>
        <input
          type="password"
          [formField]="loginForm.password"
          placeholder="••••••••"
          class="w-full px-4 py-3 rounded-lg border border-gray-200 focus:border-croper-green focus:ring-2 focus:ring-croper-green/20 outline-none transition-all"
        />
        @if (loginForm.password().touched() && loginForm.password().errors()[0]?.message) {
          <span class="text-xs text-red-500 mt-1 block">{{
            loginForm.password().errors()[0].message
          }}</span>
        }
      </div>

      <button
        type="submit"
        [disabled]="authStore.loading() || loginForm().invalid()"
        class="w-full bg-croper-green text-white py-4 rounded-lg font-bold shadow-croper hover:bg-croper-green-dark transition-all transform active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed flex justify-center items-center gap-2"
      >
        @if (authStore.loading()) {
          <span
            class="w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"
          ></span>
          Iniciando sesión...
        } @else {
          Entrar a Croper
        }
      </button>
    </form>
    <div class="mt-8 pt-6 border-t border-gray-100 text-center">
      <p class="text-sm text-croper-gray">
        ¿Aún no tienes cuenta?
        <a routerLink="/registro" class="text-croper-green font-bold cursor-pointer hover:underline"
          >Regístrate aquí</a
        >
      </p>
    </div>
    @if (errorMessage()) {
      <div
        class="p-3 mt-4 text-sm text-red-700 bg-red-50 border border-red-200 rounded-lg animate-in fade-in zoom-in duration-300 flex items-center gap-2"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-4 w-4"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
          />
        </svg>
        <span class="font-medium">{{ errorMessage() }}</span>
      </div>
    }
  </div>
</div>
